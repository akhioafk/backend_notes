(источник: https://habr.com/ru/articles/709210/; https://habr.com/ru/articles/711578/)
## **Сервисы по доставке контента** (CDN) - это географически распредленная сетевая инфраструктура, обеспечевающая быструю доставку контента.

### Провода 
Если компьютера два, их можно легко связать одним проводом и они будут передавать друг-другу данные.

![[Pasted image 20240829235049.png]]


Но, если компьютеров стало 5, то можно подключить каждый с каждым.

![[Pasted image 20240829235139.png]]

Подобный подход на самом деле является проблемой, так как нужно слишком много кабеля и у каждого компьютера должно быть по 4 порта. *Топология* данной сети слишком сложная.

**Топология** - то, как взаимосвязаны между собой элементы этих сетей. Сетевая топология может быть *физической* или *логической*. Физическая это то как в реальном мире подключены между собой устройства, а логическая - то как сигнал проходит по всем этим связям.

Поэтому мы можем использовать топологию, при которой компьютер будет соединен только с двумя своими соседями. 

![[Pasted image 20240829235607.png]]

Такая топология называется *кольцо*. Тут явно нужно меньше кабеля, но если один из устройств выйдет из строя, то вся сеть упадет.

Вместо кольцевой сети, можно использовать топологию *шина*.

![[Pasted image 20240829235804.png]]

Работоспособность теперь зависит не от устройств, но если сломается центральный кабель (шина или магистраль), то ничего работать не будет. И ремонт будет обходится сложно, так как нужно иметь доступ к каждому сантиметру провода.

Чтобы не иметь проблему с обслуживанием, можно использовать "вспомогательное устройство". Оно будет принимать данные от устройств и распределять их по сети. Таким устройством может быть *концентратор (хаб)* или *коммутатор (свитч)*. Топология такой сети - *Звезда*.

![[Pasted image 20240830000304.png]]

Дома мы как раз таки используем топологию Звезда. Все устройства подключены к одному роутеру. Интернет же - это объеденение сетей с разной топологией. 


### Интернет и его иерархия
Запросы от роутера не идут напрямую к серверу, сам роутер соединен с другой сетью - сеть провайдера. То же самое с серверами Гугла, у него собственная родительская сеть.

![[Pasted image 20240830024233.png]]

Каждый из этих провайдеров обслуживает свою сеть, которая состоит из множества мелких подсетей как наша.

Если у Гугла и у подсети один провайдер, то данные будут передаваться внутри самого провайдера что достаточно быстро.

![[Pasted image 20240830024631.png]]

Сами провайдеры соединены через специальные хабы - *точки обмена трафиком*

![[Pasted image 20240830024906.png]]

Между странами используются *подводные кабели*. Но все равно разные провайдеры подключаются к своим родительским, либо к кабелям которые дешевле и поэтому не каждый подключается напрямую. Поэтому сеть которая работает дома, проходится не по самому быстрому, а по самому дешевому.

## Протоколы
Протокол - это набор правил, определяющий, как узлы сети должны передавать данные друг другу. В основном это высокоуровневые протоколы - HTTP, SSH, IMAP, DHCP. 

### TCP/IP
Есть два приложения в сети, которые обмениваются данными. Пусть один из них сгенерирует сообщение, данное сообщение генерируется на уровне приложения.

![[Pasted image 20240830034624.png]]

Далее оно передается на транспортный уровень, где к нему добавляется TCP или UDP-заголовок. Заголовок сдержит информацию о портах, которые используются приложениями и некоторую другую информацию. В итоге получается *датаграмма* или *сегмент*.

![[Pasted image 20240830034801.png]]

Затем, сегмент передается на межсетевой уровень. Там к нему добавляется IP-заголовок, содержащий адреса компьютеров, на которых запущены приложения, участвующие в этом обмене данных. Сегмент + IP-заголовок = *пакет*.

(Обычно нет четкой разницы между датаграммами, сегментами и пакетами. Термины "датаграмма" и "сегмент" используются только когда нужно явно указать тип протокола).

![[Pasted image 20240830035224.png]]

В конце, пакет передается на канальный уровень, где кодируется и уходит по проводам в сторону точки назначения. Протоколы на этом уровне добавляют свой заголовок в каждый пакет, и в результате получается *кадр* (или фрейм).

Кадры содержат не только заголовок, но и окончание. Тот же Ethernet-кадр для нашего сообщения может выглядеть так.

![[Pasted image 20240830040225.png]]

